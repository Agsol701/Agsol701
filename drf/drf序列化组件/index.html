



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Agsol">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Drf序列化组件 - Agsol的技术栈</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Agsol的技术栈" aria-label="Agsol的技术栈" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Agsol的技术栈
            </span>
            <span class="md-header-nav__topic">
              
                Drf序列化组件
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Agsol的技术栈" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Agsol的技术栈
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      组成原理
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        组成原理
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" title="计算机基础" class="md-nav__link">
      计算机基础
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="基本数据类型" class="md-nav__link">
      基本数据类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%B8%B8%E9%87%8F%E4%B8%8E%E5%8F%98%E9%87%8F/" title="常量与变量" class="md-nav__link">
      常量与变量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B/" title="数值类型" class="md-nav__link">
      数值类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/" title="基本运算符" class="md-nav__link">
      基本运算符
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="字符串" class="md-nav__link">
      字符串
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%88%97%E8%A1%A8/" title="列表" class="md-nav__link">
      列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%AD%97%E5%85%B8/" title="字典" class="md-nav__link">
      字典
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E9%9B%86%E5%90%88/" title="集合" class="md-nav__link">
      集合
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/bytesbytearray/" title="bytesbytearray" class="md-nav__link">
      bytesbytearray
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="流程控制" class="md-nav__link">
      流程控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%87%BD%E6%95%B0/" title="函数" class="md-nav__link">
      函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0/" title="内建函数" class="md-nav__link">
      内建函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0/" title="递归函数" class="md-nav__link">
      递归函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/" title="文件处理" class="md-nav__link">
      文件处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/" title="字符编码" class="md-nav__link">
      字符编码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%9B%9B%E5%BC%8F%E5%9B%9B%E5%99%A8/" title="四式四器" class="md-nav__link">
      四式四器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E7%B1%BB/" title="类" class="md-nav__link">
      类
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="面向对象" class="md-nav__link">
      面向对象
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E6%A8%A1%E5%9D%97/" title="模块" class="md-nav__link">
      模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/" title="进程和线程" class="md-nav__link">
      进程和线程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/Python%E4%B8%AD%E7%9A%84%E8%BF%9B%E7%A8%8B/" title="Python中的进程" class="md-nav__link">
      Python中的进程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/Python%E4%B8%AD%E7%9A%84%E7%BA%BF%E7%A8%8B/" title="Python中的线程" class="md-nav__link">
      Python中的线程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/" title="线程同步" class="md-nav__link">
      线程同步
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="异常处理" class="md-nav__link">
      异常处理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Golang
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Golang
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/golang%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%AE%89%E8%A3%85/" title="golang简介及安装" class="md-nav__link">
      golang简介及安装
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%E5%92%8C%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" title="代码结构和基础语法" class="md-nav__link">
      代码结构和基础语法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E8%BF%9B%E5%88%B6%E5%8F%8A%E5%8E%9F%E7%A0%81/" title="进制及原码" class="md-nav__link">
      进制及原码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F/" title="变量和常量" class="md-nav__link">
      变量和常量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%A0%87%E8%AF%86%E7%AC%A6%E5%8F%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="标识符及数据类型" class="md-nav__link">
      标识符及数据类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B/" title="数字类型" class="md-nav__link">
      数字类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B/" title="布尔类型" class="md-nav__link">
      布尔类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B/" title="字符类型" class="md-nav__link">
      字符类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E8%BF%90%E7%AE%97%E7%AC%A6/" title="运算符" class="md-nav__link">
      运算符
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%8C%85/" title="包" class="md-nav__link">
      包
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="字符串" class="md-nav__link">
      字符串
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E8%BE%93%E5%85%A5%E8%AF%AD%E5%8F%A5/" title="输入语句" class="md-nav__link">
      输入语句
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" title="文件操作" class="md-nav__link">
      文件操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%87%BD%E6%95%B0/" title="函数" class="md-nav__link">
      函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="流程控制" class="md-nav__link">
      流程控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%95%B0%E7%BB%84/" title="数组" class="md-nav__link">
      数组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%88%87%E7%89%87/" title="切片" class="md-nav__link">
      切片
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/map/" title="map" class="md-nav__link">
      map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%8C%87%E9%92%88/" title="指针" class="md-nav__link">
      指针
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E7%BB%93%E6%9E%84%E4%BD%93/" title="结构体" class="md-nav__link">
      结构体
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E6%96%B9%E6%B3%95/" title="结构体的方法" class="md-nav__link">
      结构体的方法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5/" title="结构体的匿名字段" class="md-nav__link">
      结构体的匿名字段
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%8E%A5%E5%8F%A3/" title="接口" class="md-nav__link">
      接口
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/goroutine/" title="goroutine" class="md-nav__link">
      goroutine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" title="并发编程" class="md-nav__link">
      并发编程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="异常处理" class="md-nav__link">
      异常处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%8F%8D%E5%B0%84/" title="反射" class="md-nav__link">
      反射
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title="单元测试" class="md-nav__link">
      单元测试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/json/" title="json" class="md-nav__link">
      json
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Django
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Django
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E5%89%8D%E8%A8%80/" title="django前言" class="md-nav__link">
      django前言
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E5%9F%BA%E7%A1%80%E4%B8%89%E6%9D%BF%E6%96%A7/" title="django基础三板斧" class="md-nav__link">
      django基础三板斧
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/" title="django静态文件" class="md-nav__link">
      django静态文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E8%BF%9E%E6%8E%A5MySQL/" title="django连接MySQL" class="md-nav__link">
      django连接MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/MTV%E4%B8%8EMVC%E6%A8%A1%E5%9E%8B/" title="MTV与MVC模型" class="md-nav__link">
      MTV与MVC模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8B%E8%B7%AF%E7%94%B1%E5%B1%82/" title="django之路由层" class="md-nav__link">
      django之路由层
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8B%E8%A7%86%E5%9B%BE%E5%B1%82/" title="django之视图层" class="md-nav__link">
      django之视图层
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8B%E6%A8%A1%E6%9D%BF%E5%B1%82/" title="django之模板层" class="md-nav__link">
      django之模板层
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8BORM/" title="django之ORM" class="md-nav__link">
      django之ORM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8B%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2/" title="django之分组查询" class="md-nav__link">
      django之分组查询
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8BORM%E4%BC%98%E5%8C%96%E6%9F%A5%E8%AF%A2/" title="django之ORM优化查询" class="md-nav__link">
      django之ORM优化查询
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E5%92%8Cajax/" title="django和ajax" class="md-nav__link">
      django和ajax
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E5%BA%8F%E5%88%97%E5%8C%96%E6%A8%A1%E5%9D%97/" title="django序列化模块" class="md-nav__link">
      django序列化模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/%E5%A4%9A%E5%AF%B9%E5%A4%9A%E4%B8%89%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E6%B3%95/" title="多对多三种创建方法" class="md-nav__link">
      多对多三种创建方法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8Bforms%E7%BB%84%E4%BB%B6/" title="django之forms组件" class="md-nav__link">
      django之forms组件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B9%8Bcookies%E5%92%8Csession%E7%BB%84%E4%BB%B6/" title="django之cookies和session组件" class="md-nav__link">
      django之cookies和session组件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/django%E4%B8%AD%E9%97%B4%E4%BB%B6/" title="django中间件" class="md-nav__link">
      django中间件
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      drf
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        drf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Restful%E8%A7%84%E8%8C%83/" title="Restful规范" class="md-nav__link">
      Restful规范
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/drf中的APIView请求生命周期.md" title="drf中的APIView请求生命周期" class="md-nav__link">
      drf中的APIView请求生命周期
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/drf序列化组件.md" title="drf序列化组件" class="md-nav__link">
      drf序列化组件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/多表操作.md" title="多表操作" class="md-nav__link">
      多表操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/drf序列化组件实现十大接口.md" title="drf序列化组件实现十大接口" class="md-nav__link">
      drf序列化组件实现十大接口
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/视图家族.md" title="视图家族" class="md-nav__link">
      视图家族
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/jwt认证.md" title="jwt认证" class="md-nav__link">
      jwt认证
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/三大认证.md" title="三大认证" class="md-nav__link">
      三大认证
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/多方式登录.md" title="多方式登录" class="md-nav__link">
      多方式登录
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Django/三大组件源码分析.md" title="三大组件源码分析" class="md-nav__link">
      三大组件源码分析
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      网络编程
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        网络编程
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="网络编程" class="md-nav__link">
      网络编程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/" title="网络模型" class="md-nav__link">
      网络模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/Dns%E8%AF%A6%E8%A7%A3/" title="Dns详解" class="md-nav__link">
      Dns详解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/http%E5%8D%8F%E8%AE%AE/" title="http协议" class="md-nav__link">
      http协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/CGI%2CwSGI%2CuWSGI%2Cuwsgi/" title="CGI,wSGI,uWSGI,uwsgi" class="md-nav__link">
      CGI,wSGI,uWSGI,uwsgi
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Redis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Redis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Redis/Redis/" title="Redis" class="md-nav__link">
      Redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Redis/Golang%E4%B8%AD%E4%BD%BF%E7%94%A8Redis/" title="Golang中使用Redis" class="md-nav__link">
      Golang中使用Redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Redis/Python%E4%B8%AD%E4%BD%BF%E7%94%A8Redis/" title="Python中使用Redis" class="md-nav__link">
      Python中使用Redis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      MySQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        MySQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../MySQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/" title="数据库基础" class="md-nav__link">
      数据库基础
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MySQL/%E5%BA%93%E8%A1%A8%E5%80%BC%E7%9A%84%E6%93%8D%E4%BD%9C/" title="库表值的操作" class="md-nav__link">
      库表值的操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MySQL/pymysql/" title="pymysql" class="md-nav__link">
      pymysql
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MySQL/MySQL%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/" title="MySQL主从搭建" class="md-nav__link">
      MySQL主从搭建
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      MongoDB
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        MongoDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../MongoDB/MongoDB%E5%AE%89%E8%A3%85/" title="MongoDB安装" class="md-nav__link">
      MongoDB安装
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Docker%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AE%89%E8%A3%85/" title="Docker简介与安装" class="md-nav__link">
      Docker简介与安装
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Docker%E9%95%9C%E5%83%8F/" title="Docker镜像" class="md-nav__link">
      Docker镜像
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Docker%E5%AE%B9%E5%99%A8/" title="Docker容器" class="md-nav__link">
      Docker容器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Docker%E5%85%B6%E4%BB%96/" title="Docker其他" class="md-nav__link">
      Docker其他
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      数据结构
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        数据结构
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/" title="树" class="md-nav__link">
      树
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/" title="队列" class="md-nav__link">
      队列
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8/" title="链表" class="md-nav__link">
      链表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/" title="稀疏数组" class="md-nav__link">
      稀疏数组
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      算法
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        算法
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../算法概述.md" title="算法概述" class="md-nav__link">
      算法概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../最长不重复子串.md" title="最长不重复子串" class="md-nav__link">
      最长不重复子串
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <div class="toc">
<ul>
<li><a href="#_1">三流</a></li>
<li><a href="#_2">为什么要使用序列化器</a></li>
<li><a href="#_3">序列化家族</a></li>
<li><a href="#_4">手动序列化</a></li>
<li><a href="#serializer">Serializer序列化类</a><ul>
<li><a href="#_5">序列化</a></li>
<li><a href="#_6">反序列化</a><ul>
<li><a href="#_7">局部钩子：</a></li>
<li><a href="#_8">全局钩子：</a></li>
</ul>
</li>
<li><a href="#serializer_1">Serializer反序列化总结：</a></li>
</ul>
</li>
<li><a href="#modelserializer">ModelSerializer序列化类</a></li>
<li><a href="#_9">子序列化</a></li>
<li><a href="#listserializer">ListSerializer序列化类</a><ul>
<li><a href="#_10">配置类中配置</a></li>
</ul>
</li>
<li><a href="#_11">前台可以必传数据的要求</a></li>
<li><a href="#_12">序列化对象方法属性</a></li>
</ul>
</div>
<h1 id="_1">三流<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="c1">#标准输出流</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;123</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;456</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">#标准输入流</span>
<span class="n">res</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="c1">#标准错误流:将括号内数据作为错误输出</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abc</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xyz</span><span class="se">\n</span><span class="s1">)</span>
</code></pre></div>

<p>注意:每个流之间为异步提交,流内为同步提交.</p>
<p>其中django中的类似日志的红字就是错误六打印出来的(注意,不是错误,是错误流输出)</p>
<h1 id="_2">为什么要使用序列化器<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h1>
<p>drf中的response方法只能接收json数格式,并将json数据解析为二进制格式发送给前端,也可以更以更方便的方法对数据进行验证以及数据库操作.</p>
<h1 id="_3">序列化家族<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h1>
<ol>
<li>Serializer类,底层是序列化类,(了解原理)</li>
<li>ModelSerializer类,模型序列化类(核心)</li>
<li>ListSerializer类:群操作序列化类(辅助类)</li>
</ol>
<h1 id="_4">手动序列化<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h1>
<p>前后端交互,通过json格式文件进行传输,使用djangoORM语句将对象从数据库中找出来进行交互,需要手动序列化转为json格式再进行交互.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">#views.py</span>
<span class="k">class</span> <span class="nc">UserV1APIView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="c1"># 单查群查</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">pk</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pk</span><span class="p">:</span>
            <span class="n">user_dic</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">user_dic</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;pk error&#39;</span><span class="p">,</span>
                <span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>

            <span class="n">user_dic</span><span class="p">[</span><span class="s1">&#39;img&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">BASE_URL</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">user_dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_dic</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user_query</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">user_dic</span> <span class="ow">in</span> <span class="n">user_query</span><span class="p">:</span>
                <span class="n">user_dic</span><span class="p">[</span><span class="s1">&#39;img&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">BASE_URL</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">user_dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">))</span>
            <span class="n">user_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_query</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_list</span>
            <span class="p">})</span>
</code></pre></div>

<h1 id="serializer">Serializer序列化类<a class="headerlink" href="#serializer" title="Permanent link">&para;</a></h1>
<h3 id="_5">序列化<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>简单来说，序列化就是将数据给前台；反序列化就是完成数据库入库</p>
<p>视图类序列化过程：</p>
<ul>
<li>ORM操作得到数据</li>
<li>将数据序列化成可以返回给前端的数据</li>
<li>将数据返回给前台</li>
</ul>
<p>新建serializers.py文件,文件中进行Serializer类的操作 </p>
<div class="codehilite"><pre><span></span><code><span class="c1"># views.py</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">serializers</span>
<span class="k">class</span> <span class="nc">UserV2APIView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="c1"># 单查群查</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">pk</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pk</span><span class="p">:</span>
            <span class="n">user_obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">user_obj</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;pk error&#39;</span><span class="p">,</span>
                <span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>

            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">UserSerializer</span><span class="p">(</span><span class="n">user_obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>  <span class="c1"># many默认为False</span>
            <span class="n">user_obj_data</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">data</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_obj_data</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># 将对象对外提供的字段，已经整个序列化过程封装，形成序列化类</span>
            <span class="n">user_query</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">UserSerializer</span><span class="p">(</span><span class="n">user_query</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">user_list_data</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">data</span>

            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_list_data</span>
            <span class="p">})</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">#序列化类 serializer.py</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
<span class="k">class</span> <span class="nc">UserSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">Serializer</span><span class="p">):</span>
    <span class="c1"># 1）字段名与字段类型要与处理的model类对应</span>
    <span class="c1"># 2）不提供的字段，就不参与序列化给前台</span>
    <span class="c1"># 3）可以自定义序列化字段，采用方法序列化，方法固定两个参数，第二个参数就是参与序列化的model对象</span>
    <span class="c1">#       (严重不建议自定义字段名与数据库字段名重名，由get_自定义字段名方法的返回值提供字段值)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="c1"># sex = serializers.IntegerField()</span>
    <span class="c1"># sex = serializers.SerializerMethodField()  # 不建议这样命名</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_gender</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_sex_display</span><span class="p">()</span>

    <span class="c1"># 注：在高级序列化与高级视图类中，drf默认帮我们处理图片等子资源</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">BASE_URL</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</code></pre></div>

<p>使用改名显示字段,官方建议使用在models类中定义属性方法</p>
<div class="codehilite"><pre><span></span><code><span class="c1">#models中</span>
    <span class="c1"># 第二种自定义序列化字段（插拔式，提倡使用）</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gender</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sex_display</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">BASE_URL</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</code></pre></div>

<p>总结:</p>
<ol>
<li>
<p>设置序列化字段，字段名与字段类型要与处理的model类属性名对应(只参与序列化的类型不需要设置条件)</p>
</li>
<li>
<p>model类中有的字段，但在序列化中没有对应字段，该类字段不参与序列化</p>
</li>
<li>
<p>自定义序列化字段(方法一)，字段类型为SerializerMethodField()，值有 get_自定义字段名(self, model_obj) 方法提供，        </p>
</li>
</ol>
<p>一般值都与参与序列化的model对象(model_obj)有关</p>
<h3 id="_6">反序列化<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>视图类反序列化过程：</p>
<ul>
<li>从请求对象中获取前台提交的数据</li>
<li>交给序列化类完成反序列化（数据的校验）</li>
<li>借助序列化完成数据入库</li>
<li>反馈给前台处理结果</li>
</ul>
<p>views中设置data=request.data</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># views.py</span>

<span class="k">class</span> <span class="nc">UserV2ApiView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">pk</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pk</span><span class="p">:</span>
            <span class="n">user_obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">user_obj</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;pk error&#39;</span><span class="p">,</span>
                <span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserSerializer</span><span class="p">(</span><span class="n">user_obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">user_obj</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">data</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_obj</span><span class="o">.</span><span class="n">data</span>
            <span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">user_query</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserSerializer</span><span class="p">(</span><span class="n">user_query</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">user_list</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">data</span>

        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
            <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_list</span>
        <span class="p">})</span>

    <span class="c1"># 单增</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
        <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserDeSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="c1"># 入库</span>
            <span class="n">user_obj</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserSerializer</span><span class="p">(</span><span class="n">user_obj</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>   <span class="c1"># 将入库得到的user对象重新序列化的数据返回给前台</span>
            <span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">errors</span>
            <span class="p">})</span>
</code></pre></div>

<p>serializer中</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 序列化类  serializer.py</span>
<span class="k">class</span> <span class="nc">UserDeSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">Serializer</span><span class="p">):</span>
    <span class="c1"># 自定义 系统校验字段</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">error_messages</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;min_length&#39;</span><span class="p">:</span> <span class="s1">&#39;太短&#39;</span><span class="p">,</span>
        <span class="s1">&#39;max_length&#39;</span><span class="p">:</span> <span class="s1">&#39;太长&#39;</span>
    <span class="p">})</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

    <span class="c1"># 不写，不参与反序列化，写就必须参与反序列化(但可以设置required=False取消必须)</span>
    <span class="c1"># required=False的字段，前台不提供，走默认值，提供就一定进行校验；不写前台提不提供都采用默认值</span>
    <span class="n">sex</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># 自定义校验字段：从设置语法与系统字段没有区别，但是这些字段不能参与入库操作，需要在全局钩子中，将其取出</span>
    <span class="n">re_password</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

    <span class="c1"># 局部钩子：</span>
    <span class="c1">#   方法就是 validate_校验的字段名(self, 校验的字段数据)</span>
    <span class="c1">#   校验规则：成功直接返回value，失败抛出校验失败信息</span>
    <span class="k">def</span> <span class="nf">validate_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;g&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;名字中不能有g&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="c1"># 全局钩子：</span>
    <span class="c1">#   方法就是 validate(self, 所有的校验数据)</span>
    <span class="c1">#   校验规则：成功直接返回attrs，失败抛出校验失败信息</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
        <span class="n">re_password</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;re_password&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password</span> <span class="o">!=</span> <span class="n">re_password</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">({</span><span class="s1">&#39;re_password&#39;</span><span class="p">:</span> <span class="s1">&#39;两次密码不一致&#39;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">attrs</span>

    <span class="c1"># 在视图类中调用序列化类的save方法完成入库，Serializer类能做的增入库走create方法，改入库走update方法</span>
    <span class="c1"># 但Serializer没有提供两个方法的实现体</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>

    <span class="c1"># instance要被修改的对象，validated_data代表校验后用来改instance的数据</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="c1"># 用户名不能被修改</span>
        <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
        <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instance</span>
</code></pre></div>

<p>对于数据的校验,需要通过自定义系统方法,自定义局部以及全局钩子的方法进行校验.还需要自己写create以及update方法.</p>
<h5 id="_7">局部钩子：<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h5>
<ul>
<li>方法就是 validate_校验的字段名(self, 校验的字段数据)</li>
<li>校验规则：成功直接返回value，失败抛出校验失败信息</li>
</ul>
<h5 id="_8">全局钩子：<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<ul>
<li>方法就是 validate(self, 所有的校验数据)</li>
<li>校验规则：成功直接返回attrs，失败抛出校验失败信息</li>
</ul>
<h3 id="serializer_1">Serializer反序列化总结：<a class="headerlink" href="#serializer_1" title="Permanent link">&para;</a></h3>
<ul>
<li>系统校验 与 自定义校验字段没有区别</li>
<li>自定义校验字段是不能直接入库的，需要设置入库规则，或将其移除不入库(这类字段就是参与全局校验用的)</li>
<li>所有字段都可以设置对应的局部钩子进行校验，钩子方法<code>validate_字段名(self, 字段值value)</code> 规则：成功直接返回value，失败抛出校验失败信息<code>ValidationError('错误信息')</code></li>
<li>一个序列化类存在 一个全局钩子 可以对所有字段进行全局校验，钩子方法 <code>validate(self, 所有字段值字典attrs)</code></li>
<li>重写create方法实现增入库，重写update方法实现改入库，都会返回入库成功的对象</li>
</ul>
<h1 id="modelserializer">ModelSerializer序列化类<a class="headerlink" href="#modelserializer" title="Permanent link">&para;</a></h1>
<div class="codehilite"><pre><span></span><code><span class="c1"># 模型类</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="n">SEX_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;女&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;男&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">username</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;姓名&#39;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;密码&#39;</span><span class="p">)</span>
    <span class="n">sex</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">SEX_CHOICES</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;性别&#39;</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">&#39;img&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;img/default.jpg&#39;</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;头像&#39;</span><span class="p">)</span>

    <span class="c1"># 开发中，数据不会直接删除，通过字段控制</span>
    <span class="n">is_delete</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;是否注销&#39;</span><span class="p">)</span>
    <span class="n">created_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;创建时间&#39;</span><span class="p">)</span>


    <span class="c1"># 第二种自定义序列化字段（插拔式，提倡使用）</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gender</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sex_display</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">BASE_URL</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;table_user&#39;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;用户表&#39;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># views.py</span>
<span class="k">class</span> <span class="nc">UserV3ApiView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="c1"># 单查群查</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">pk</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pk</span><span class="p">:</span>
            <span class="n">user_obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">user_obj</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;pk error&#39;</span><span class="p">,</span>
                <span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>

            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserModelSerializer</span><span class="p">(</span><span class="n">user_obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">data</span>
            <span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">user_query</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserModelSerializer</span><span class="p">(</span><span class="n">user_query</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">data</span>
            <span class="p">})</span>

    <span class="c1"># 单增</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserModelSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">user_obj</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span>
                <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserModelSerializer</span><span class="p">(</span><span class="n">user_obj</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">errors</span>
            <span class="p">})</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1"># 序列化类</span>
<span class="k">class</span> <span class="nc">UserModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="c1"># 第一种自定义序列化字段：该字段必须在fields中设置</span>
    <span class="c1"># gender = serializers.SerializerMethodField()</span>
    <span class="c1"># def get_gender(self, obj):</span>
    <span class="c1">#     return obj.get_sex_display()</span>


    <span class="c1"># 自定义反序列化字段同Serializer类，且规则只能在此声明中设置，或是在钩子中设置，</span>
    <span class="c1">#       在extra_kwargs中对其设置的无效</span>
    <span class="c1"># 注：自定义反序列化字段与系统字段，设置规则一样，所以必须设置 write_only</span>
    <span class="n">re_password</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">write_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span>
        <span class="c1"># fields采用 插拔式 设置所有参与序列化与反序列化字段</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;icon&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;re_password&#39;</span><span class="p">)</span>
        <span class="n">extra_kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="p">{</span>  <span class="c1"># 系统字段不设置read_only和write_only，默认都参加</span>
                <span class="s1">&#39;min_length&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s1">&#39;max_length&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                <span class="s1">&#39;error_messages&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;min_length&#39;</span><span class="p">:</span> <span class="s1">&#39;太短&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;max_length&#39;</span><span class="p">:</span> <span class="s1">&#39;太长&#39;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;read_only&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>  <span class="c1"># 自定义的序列化字段默认就是read_only，且不能修改，可以省略</span>
            <span class="p">},</span>
            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;write_only&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s1">&#39;sex&#39;</span><span class="p">:</span> <span class="p">{</span>  <span class="c1"># 像sex有默认值的字段，为选填字段（&#39;required&#39;: True可以将其变为必填字段）</span>
                <span class="s1">&#39;write_only&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="c1"># &#39;required&#39;: True</span>
            <span class="p">}</span>
        <span class="p">}</span>


    <span class="c1"># 局部全局钩子同Serializer类，是与 Meta 同缩进的</span>
    <span class="k">def</span> <span class="nf">validate_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;g&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;名字中不能有g&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
        <span class="n">re_password</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;re_password&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password</span> <span class="o">!=</span> <span class="n">re_password</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">({</span><span class="s1">&#39;re_password&#39;</span><span class="p">:</span> <span class="s1">&#39;两次密码不一致&#39;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">attrs</span>

    <span class="c1"># create和update方法不需要再重写，ModelSerializer类已提供，且支持所有关系下的连表操作</span>
</code></pre></div>

<p>总结:</p>
<ol>
<li>
<p>序列化类继承ModelSerializer，所以需要在配置类Meta中进行配置</p>
</li>
<li>
<p>model配置：绑定序列化相关的Model表</p>
</li>
<li>
<p>fields配置：采用 插拔式 设置所有参与序列化与反序列化字段</p>
</li>
<li>
<p>extra_kwargs配置：    </p>
</li>
</ol>
<p>划分系统字段为三种：只序列化:只读(read_only)、只反序列化:只写(write_only)、可读可写(不设置)    </p>
<p>字段是否必须：required    </p>
<p>选填字段：在extra_kwargs进行配置，但不设置required，且有默认值</p>
<ol>
<li>
<p>自定义序列化字段：    </p>
</li>
<li>
<p>第一种(不提倡)：在序列化类中用SerializerMethodField()来实现   </p>
</li>
<li>
<p>第二种(提倡)：在模型类中用@property来实现，可插拔</p>
</li>
<li>
<p>自定义反序列化字段：    同Serializer类，且规则只能在此声明中设置，或是在钩子中设置，在extra_kwargs中对其设置的无效    自定义反序列化字段与系统字段，设置规则一样，所以必须设置 write_only</p>
</li>
<li>
<p>局部钩子，全局钩子同Serializer类</p>
</li>
<li>
<p>不需要重写create和update方法</p>
</li>
</ol>
<h1 id="_9">子序列化<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h1>
<ol>
<li>
<p>只能在序列化中使用,因为外键字段不可以反序列化写入数据库</p>
</li>
<li>
<p>字段名必须是==外键(正反向都可)字段==</p>
</li>
</ol>
<p>因为相对于自定义序列化外键字段，自定义序列化字段是不能参与反序列化的，而子序列化必须为外键名，所以就无法入库</p>
<ol>
<li>
<p>外键关联多条数据时,需要明确many=True</p>
</li>
<li>
<p>单项操作,作为子类的系类的类必须写在上方,</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">BookModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Book</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="s1">&#39;__all__&#39;</span>


<span class="k">class</span> <span class="nc">PublishModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="c1"># 子序列化：</span>
    <span class="c1"># 1）只能在序列化中使用</span>
    <span class="c1"># 2）字段名必须是外键(正向反向)字段</span>
    <span class="c1">#   因为相对于自定义序列化外键字段，自定义序列化字段是不能参与反序列化的，而子序列化必须为外键名，所以就无法入库</span>
    <span class="c1"># 3）在外键关联数据是多条时，需要明确many=True</span>
    <span class="c1"># 4）是单向操作，因为作为子系列的类必须写在上方，所以不能产生逆方向的子序列化</span>
    <span class="n">books</span> <span class="o">=</span> <span class="n">BookModelSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Publish</span>
        <span class="c1"># fields = &#39;__all__&#39;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;books&#39;</span><span class="p">]</span> <span class="c1">#不写上面的相当于直接反向将books直接全部查出来</span>
</code></pre></div>

<p>exclude=['xxx']属性,在全部中去除xxx属性,序列化发送给前端</p>
<p>depth =1 表示查询深度为1,即将本表的一层外键字段对应的表记录战术出来</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">PublishModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>   
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Publish</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;books&#39;</span><span class="p">]</span>

        <span class="c1"># 了解配置</span>
        <span class="c1"># fields = &#39;__all__&#39;</span>
        <span class="c1"># exclude = [&#39;name&#39;]</span>
        <span class="c1"># depth = 2  # 自动深度，值代表深度次数，但是被深度的外键采用__all__，显示所以字段</span>
</code></pre></div>

<p>其中,fields和exclude不可以同时使用</p>
<h1 id="listserializer">ListSerializer序列化类<a class="headerlink" href="#listserializer" title="Permanent link">&para;</a></h1>
<p>只重写了list群create方法,没写update方法</p>
<p>ModelSerializer默认配置了ListSerializer辅助类，帮助完成群增群改</p>
<h5 id="_10">配置类中配置<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="c1">#自定义配置listSerialzer类方法</span>
<span class="k">class</span> <span class="nc">BookListSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ListSerializer</span><span class="p">):</span>
    <span class="c1"># 自定义的群增群改辅助类，没有必要重写create方法</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">validated_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_list</span><span class="p">,</span> <span class="n">validated_data_list</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">instance_list</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">attrs</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">attrs</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">validated_data_list</span><span class="p">)</span>
        <span class="p">]</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">#默认</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">list_serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ListSerializer</span>
<span class="c1">#自定义</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="c1"># 如果只有群增，是不需要自定义配置的，但要完成群改，必须自定义配置</span>
    <span class="n">list_serializer_class</span> <span class="o">=</span> <span class="n">BookListSerializer</span>
</code></pre></div>

<h1 id="_11">前台可以必传数据的要求<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h1>
<p>fields中写了,又无默认值,而extra_kwargs中也没设置required=False.就一定要传给后台值.</p>
<h1 id="_12">序列化对象方法属性<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h1>
<ul>
<li>
<p>book_ser.is_valid(raise_exception=True),设置系统校验,不符合格式直接抛异常</p>
</li>
<li>
<p>book_ser.data 返回序列化对象字段的所有信息</p>
</li>
<li>
<p>序列化组件属性参数:</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>book_ser = serializers.BookModelSerializer(
instance=book_instance, 
data=request.data, 
many=True,
partial=True, 
context={&#39;request&#39;: request}
)
</code></pre></div>

<p>instance表示被修改的数据</p>
<p>data表示序列化传入的数据</p>
<p>partial表示参与反序列化的字段,可以为选填字段</p>
<p>context表示给序列化类方法里面带参数,常用来将request对象传入</p>
<p>many=True表示可以传入多个值 </p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 - 2020 Agsol
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>